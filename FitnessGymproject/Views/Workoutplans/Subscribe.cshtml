@model IEnumerable<FitnessGymproject.Models.Workoutplan>

<h2>Your Workout Plans</h2>

@if (Model != null && Model.Any())
{
    <form method="post" action="@Url.Action("SubscribeToPlan")">
        <table class="table">
            <thead>
                <tr>
                    <th>Plan Name</th>
                    <th>Trainer</th>
                    <th>Goals</th>
                    <th>Price</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var plan in Model)
                {
                    <tr>
                        <td>@plan.PlanName</td>
                        <td>@plan.Trainer.FullName</td>
                        <td>@plan.Goals</td>
                        <td>@plan.Price</td>
                        <td>
                            @if (plan.MemberId == null)  // Display button only for unassigned plans
                            {
                                <button type="submit" name="workoutPlanId" value="@plan.WorkoutPlanId" class="btn btn-primary">Subscribe</button>
                            }
                            else
                            {
                                <span>Already Assigned</span>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </form>
}
else
{
    <p>@ViewBag.Message</p>
}
